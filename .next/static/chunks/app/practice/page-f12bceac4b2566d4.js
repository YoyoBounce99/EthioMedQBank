(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{63:(e,t,l)=>{"use strict";var s=l(7260);l.o(s,"useRouter")&&l.d(t,{useRouter:function(){return s.useRouter}})},793:(e,t,l)=>{Promise.resolve().then(l.bind(l,8846))},2899:(e,t,l)=>{"use strict";l.d(t,{U:()=>a});var s=l(8490),r=l(5704);let a=()=>(0,s.createBrowserClient)(r.env.NEXT_PUBLIC_SUPABASE_URL,r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)},8846:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>i});var s=l(5155),r=l(2115),a=l(2899),n=l(63);function i(){let[e,t]=(0,r.useState)([]),[l,i]=(0,r.useState)(0),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(0),[x,b]=(0,r.useState)(!1),[h,m]=(0,r.useState)(600),[p,f]=(0,r.useState)(!1),[g,N]=(0,r.useState)({}),j=(0,a.U)(),v=(0,n.useRouter)();(0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await j.auth.getUser();if(!e)return v.push("/login");let{data:l}=await j.from("profiles").select("paid_until").eq("id",e.id).single();if(!(null==l?void 0:l.paid_until)||new Date(l.paid_until)<new Date)return alert("Subscription expired"),v.push("/dashboard");let{data:s}=await j.from("questions").select("*").limit(10);s&&t(s)})()},[v,j]),(0,r.useEffect)(()=>{if(x||0===e.length)return;let t=setInterval(()=>{m(e=>e<=1?(clearInterval(t),w(),0):e-1)},1e3);return()=>clearInterval(t)},[x,e]);let w=()=>{let t=0;e.forEach(e=>{g[e.id]===e.correct_option&&t++}),u(t),b(!0),f(!0),i(0)};if(0===e.length)return(0,s.jsx)("div",{className:"p-10",children:"Loading Exam..."});let _=e[l],y=g[_.id]===_.correct_option;return(0,s.jsx)("div",{className:"min-h-screen bg-slate-100 p-4 md:p-8 text-slate-900",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-blue-900 text-white p-4 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"font-bold text-lg",children:"Gastroenterology EHPLE"}),!x&&(0,s.jsxs)("div",{className:"font-mono font-bold ".concat(h<60?"text-red-400":"text-white"),children:[Math.floor(h/60),":",String(h%60).padStart(2,"0")]})]}),x&&!p&&(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Quiz Completed"}),(0,s.jsxs)("div",{className:"text-5xl font-bold text-blue-600 mb-4",children:[c," / ",e.length]}),(0,s.jsx)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Review Answers"})]}),(!x||p)&&(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-slate-500 mb-4",children:[(0,s.jsxs)("span",{children:["Question ",l+1," of ",e.length]}),p&&(0,s.jsx)("span",{className:y?"text-green-600 font-bold":"text-red-600 font-bold",children:y?"Correct":"Incorrect"})]}),(0,s.jsx)("p",{className:"text-lg font-medium text-slate-800 mb-6",children:_.question_text}),_.image_url&&(0,s.jsx)("div",{className:"mb-6 bg-gray-200 w-full h-64 flex items-center justify-center rounded text-gray-500",children:(0,s.jsx)("span",{children:"[Radiology Image Placeholder]"})}),(0,s.jsx)("div",{className:"space-y-3",children:["A","B","C","D"].map(t=>{let r="option_".concat(t.toLowerCase()),a=g[_.id]===t,n=_.correct_option===t,i="w-full text-left p-4 rounded border transition-colors ";return p?n?i+="bg-green-100 border-green-500 text-green-900 font-bold":a&&!n?i+="bg-red-100 border-red-500 text-red-900":i+="border-slate-200 opacity-60":i+=a?"bg-blue-100 border-blue-500 text-blue-900":"border-slate-200 hover:bg-slate-50",(0,s.jsxs)("button",{onClick:()=>{!x&&(d(t),N({...g,[e[l].id]:t}))},disabled:x,className:i,children:[(0,s.jsxs)("span",{className:"font-bold mr-2",children:[t,"."]}),_[r]]},t)})}),p&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-slate-700",children:[(0,s.jsx)("h4",{className:"font-bold text-yellow-800 mb-1",children:"Explanation:"}),(0,s.jsx)("p",{children:_.explanation})]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,s.jsx)("button",{onClick:()=>{l>0&&(i(l-1),d(g[e[l-1].id]||null))},disabled:0===l,className:"px-4 py-2 rounded border hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),l===e.length-1?!x&&(0,s.jsx)("button",{onClick:w,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Submit Exam"}):(0,s.jsx)("button",{onClick:()=>{l<e.length-1&&(i(l+1),d(g[e[l+1].id]||null))},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Next"})]}),p&&(0,s.jsx)("button",{onClick:()=>v.push("/dashboard"),className:"mt-6 w-full py-2 text-blue-600 hover:underline",children:"Back to Dashboard"})]})]})})}}},e=>{e.O(0,[490,441,255,358],()=>e(e.s=793)),_N_E=e.O()}]);